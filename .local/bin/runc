#!/bin/bash -eu

TEMP_FILE="$(mktemp)"
TEMP_EXECUTABLE="$(mktemp)"

finish() {
	rm -f "$TEMP_FILE"
	rm -f "$TEMP_EXECUTABLE"
}

trap finish EXIT

cat <<-EOF > "$TEMP_FILE"
	#include <stdio.h>
	#include <stdlib.h>

	int main(int argc, char *argv[])
	{
		$(cat)
	}
	EOF

gcc -xc "$TEMP_FILE" -o "$TEMP_EXECUTABLE"

"$TEMP_EXECUTABLE"

